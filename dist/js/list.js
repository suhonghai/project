"use strict";require(["config"],function(){require(["jquery","template","cookie","load"],function(c,e){c(function(){c.getJSON("../mock/list5.json",function(t){var i={products:t.res_body.data},n=e("prod5",i);c(".main_content").html(n),c("img").load(function(){c(function(){var i,n,e=void 0,t=c(".main_content").width()-17,r=c(".prod");n=c(".prod").width();var o=Math.floor(t/n);i=(t-o*n)/(o+1),(e=new Array(o)).fill(0),c.each(Array.from(r),function(){var t=e.indexOf(Math.min.apply(null,e));c(this).css({left:(t+1)*i+t*n,top:e[t]+10}),e[t]+=parseFloat(c(this).css("height"))+10,c(".main_content").css({height:Math.max.apply(null,e)+10})})})})})}),c(function(){c(".main_content").delegate("img","click",function(){var t={src:c(this).attr("src"),img:c(this).siblings(".price").text().slice(1),brand:c(this).parent().siblings(".number").text()};console.log(t.img),c.cookie.json=!0;var i=[];i.push(t),c.cookie("prods",i,{expries:7,path:"/"}),location="../html/detail.html"}),c(function(){c(".main_content").delegate(".cart","click",function(){var t={produce:c(this).parent().prev().text(),price:c(this).parent().siblings(".img").find(".price").text().slice(1),img:c(this).parent().siblings(".img").find("img").attr("src"),number:c(this).parent().siblings(".number").text(),amount:1};c.cookie.json=!0;var i=c.cookie("products")||[],n=function(t,i){for(var n=1;n<i.length;n++)if(i[n].img===t)return n;return-1}(t.img,i);return-1===n?i.push(t):i[n].amount++,c.cookie("products",i,{expries:7,path:"/"}),alert("加入成功"),!1})})})})});